---
zookeeper-servers:
  - host: zk

labels:
  - name: centos-7
  - name: fedora-28
  - name: tripleo-ovb-centos-7

providers:
  - name: static-{{ nodepool_provider }}
    driver: static
    pools:
      - name: main
        nodes:
        nodes:
{% for subnode in groups['subnodes'] %}
          - name: {{ subnode }}
            labels:
                - fedora-28
                - centos-7
                - tripleo-ovb-centos-7
            host-key: {{ lookup('pipe', 'ssh-keyscan -t ed25519 ' + hostvars[subnode].ansible_host ).split(" ", 1)[1] }}
            username: {{ ansible_user }}
{% endfor %}
