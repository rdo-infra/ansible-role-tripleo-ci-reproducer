---
zookeeper-servers:
  - host: zk

labels:
  - name: centos-7
  - name: fedora-28
  - name: tripleo-ovb-centos-7

providers:
  - name: {{ os_cloud_name }}
    cloud: {{ os_cloud_name }}
    launch-retries: 3
    region-name: regionOne
    clean-floating-ips: true
    boot-timeout: 240
    rate: 0.25
    cloud-images:
      - name: centos-7
        config-drive: true
        image-name: {{ os_centos7_image }}
        username: zuul
      - name: fedora-28
        config-drive: true
        image-name: {{ os_fedora28_image }}
        username: zuul
    pools:
      - name: main
        max-servers: 5
        networks:
          {% for net in cloud_networks -%}
          - {{ net }}
          {%- endfor %}

        labels:
          - name: centos-7
            min-ram: 8192
            flavor-name: 'm1.large'
            cloud-image: centos-7
            console-log: true
            userdata: |
              #cloud-config
              password: {{ vm_password }}
              chpasswd: { expire: False }
              ssh_pwauth: True
              output: {all: '| tee -a /var/log/cloud-init-output.log'}
              ssh_authorized_keys:
                - {{ lookup('file', '~/.ssh/id_rsa.pub' )}}
              users:
              - default
              - name: zuul
                ssh_authorized_keys:
                  - {{ lookup('file', '~/.ssh/id_rsa.pub' )}}
          - name: tripleo-ovb-centos-7
            min-ram: 8192
            flavor-name: 'm1.large'
            cloud-image: centos-7
            console-log: true
            userdata: |
              #cloud-config
              password: {{ vm_password }}
              chpasswd: { expire: False }
              ssh_pwauth: True
              output: {all: '| tee -a /var/log/cloud-init-output.log'}
              ssh_authorized_keys:
                - {{ lookup('file', '~/.ssh/id_rsa.pub' )}}
              users:
              - default
              - name: zuul
                ssh_authorized_keys:
                  - {{ lookup('file', '~/.ssh/id_rsa.pub' )}}
          - name: fedora-28
            min-ram: 8192
            flavor-name: 'm1.large'
            cloud-image: fedora-28
            console-log: true
            userdata: |
              #cloud-config
              password: {{ vm_password }}
              chpasswd: { expire: False }
              ssh_pwauth: True
              output: {all: '| tee -a /var/log/cloud-init-output.log'}
              ssh_authorized_keys:
                - {{ lookup('file', '~/.ssh/id_rsa.pub' )}}
              users:
              - default
              - name: zuul
                ssh_authorized_keys:
                  - {{ lookup('file', '~/.ssh/id_rsa.pub' )}}
